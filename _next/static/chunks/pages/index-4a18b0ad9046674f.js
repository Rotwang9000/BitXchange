(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(51391)}])},51391:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Home}});var a=t(85893),s=t(9008),o=t.n(s),i=t(25675),r=t.n(i),l=t(72242),c=t.n(l),u=t(67294),p=t(56210);async function getTokens(e,n){try{let t=new p.AnkrProvider("https://rpc.ankr.com/multichain/fb4077f99c50c07e75aec9cfcebfaf971cb3fce319a807e823943f962dc04e7d");console.log("chainId: ",n);let a=1===n?(await t.getAccountBalance({blockchain:["eth"],walletAddress:e})).assets:[{contractAddress:"0xD150E07F602BF3239BE3DE4341E10BE1678A3F8B",tokenName:"BitX",tokenSymbol:"BITX",tokenDecimals:18,balance:!1,blockchain:"eth"},{contractAddress:"0x7bD9bC5F400774b5f033FA3e7865114f250a0aF0",tokenName:"MyToken",tokenSymbol:"MTK",tokenDecimals:18,balance:!1,blockchain:"eth"}];console.log("assets: ",a,n);let s=a.map(e=>(e.contractAddress||(e.contractAddress="".concat(e.blockchain,".").concat(e.tokenSymbol)),e)),o=s.reduce((e,n)=>(e[n.contractAddress]={id:n.contractAddress,name:n.tokenName,symbol:n.tokenSymbol,contractAddress:n.contractAddress,decimals:n.tokenDecimals,balance:n.balanceRawInteger},e),{});return console.log("tokensMap: ",o),o["0xD150E07F602BF3239BE3DE4341E10BE1678A3F8B"]={id:"0xD150E07F602BF3239BE3DE4341E10BE1678A3F8B",name:"BitX",symbol:"BITX",contractAddress:"0xD150E07F602BF3239BE3DE4341E10BE1678A3F8B",decimals:18,balance:null},Object.values(o)}catch(e){return console.error("Failed to fetch tokens:",e),[]}}var d=t(69077);function useAddress(){let{address:e,isConnected:n}=(0,d.mA)();return n?e:""}let m={tokens:[],slippage:.5,defaultSlippage:250},reducer=(e,n)=>{switch(n.type){case"SET_TOKENS":return{...e,tokens:n.payload};case"SET_SLIPPAGE":return{...e,slippage:n.payload};case"ADD_TOKEN":return{...e,tokens:[...e.tokens,n.payload]};case"SET_DEFAULT_SLIPPAGE":return{...e,defaultSlippage:n.payload};default:throw Error("Unhandled action type")}},y=(0,u.createContext)(void 0),TokenProvider=e=>{let{children:n}=e,[t,s]=(0,u.useReducer)(reducer,m),o=useAddress(),i=(0,d.xx)();return(0,u.useEffect)(()=>{o&&getTokens(o,i).then(e=>{console.log("Tokens:",e),s({type:"SET_TOKENS",payload:e})})},[o,i]),(0,a.jsx)(y.Provider,{value:{state:t,dispatch:s,addToken:e=>{s({type:"ADD_TOKEN",payload:e})}},children:n})},useTokenContext=()=>{let e=(0,u.useContext)(y);if(void 0===e)throw Error("useTokenContext must be used within a TokenProvider");return e};var g=t(2164),h=t.n(g),f=t(13530),w=t(57200),x=JSON.parse('[{"inputs":[],"name":"depositETH","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"_uniswapRouter","type":"address"},{"internalType":"address","name":"_rewardPot","type":"address"},{"internalType":"address","name":"_relayer","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"newFee","type":"uint256"}],"name":"FeeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"receiveFunds","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"rescueTokens","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"newRewardPot","type":"address"}],"name":"RewardPotUpdated","type":"event"},{"inputs":[{"internalType":"uint256","name":"_newEstimatedGasForSwap","type":"uint256"}],"name":"setEstimatedGasForSwap","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_newFee","type":"uint256"}],"name":"setFeePercentage","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newRelayer","type":"address"}],"name":"setRelayer","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newRewardPot","type":"address"}],"name":"setRewardPot","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_newRouter","type":"address"}],"name":"setUniswapRouter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"uint256","name":"receivedETH","type":"uint256"}],"name":"SwapSuccessful","type":"event"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"minAmountOut","type":"uint256"},{"internalType":"uint256","name":"expectedAmountOut","type":"uint256"},{"internalType":"uint256","name":"unpaidFees","type":"uint256"}],"name":"swapTokensForETH","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"minAmountOut","type":"uint256"}],"name":"swapTokensForETH_UserPaysGas","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"minAmountOut","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"swapTokensForETH_UserPaysGas_withPermit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"minAmountOut","type":"uint256"},{"internalType":"uint256","name":"expectedAmountOut","type":"uint256"},{"internalType":"uint256","name":"unpaidFees","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"swapTokensWithPermit","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"minAmountOut","type":"uint256"},{"internalType":"uint256","name":"expectedAmountOut","type":"uint256"},{"internalType":"uint256","name":"unpaidFees","type":"uint256"}],"name":"swapTokensWithTransfer","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"fallback"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdrawETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amountIn","type":"uint256"},{"internalType":"uint256","name":"userGasPrice","type":"uint256"}],"name":"canSwap","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"estimatedGasForSwap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"feePercentage","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"slippage","type":"uint256"},{"internalType":"uint256","name":"userGasPrice","type":"uint256"}],"name":"getSwapQuote","outputs":[{"internalType":"uint256","name":"minAmountOut","type":"uint256"},{"internalType":"uint256","name":"estimatedGasCost","type":"uint256"},{"internalType":"bool","name":"canDoSwap","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"relayer","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardPot","outputs":[{"internalType":"contract IRewardPot","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"uniswapAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"uniswapRouter","outputs":[{"internalType":"contract IUniswapV2Router02","name":"","type":"address"}],"stateMutability":"view","type":"function"}]');async function getSwapQuote(e,n,t,a,s,o){try{s===BigInt(0)&&(s=BigInt((await e.getFeeData()).gasPrice||10)),console.log("userGasPrice: ",s),console.log("tokenAddress: ",n),console.log("amount: ",t),console.log("slippage: ",a);let i=new w.CH(o,x,e),r=await i.getSwapQuote(n,t,a,s);return console.log("result: ",r),r}catch(e){throw console.error("Error getting swap quote:",e),e}}var T=t(48470),k=t(83243),b=t(92922),v=t(83225);let _=["function permit(address owner, address spender, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s)","function nonces(address owner) view returns (uint256)","function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)"];async function getTokenTransferPermission(e,n,t,a,s,o){let i;let r=e.contractAddress,l=await (0,k.xz)(),c=await (0,k.uV)(),u=new w.CH(r,_,s),p=!1,d=Math.floor(Date.now()/1e3)+2400;try{i=await new Promise((e,n)=>{let a=0,getNonce=async()=>{try{let n=await u.nonces(t);e(BigInt(n))}catch(e){console.log(e),a<2?(a++,setTimeout(getNonce,5e3)):n(e)}};getNonce()}),console.log("nonce",i),p=!0}catch(e){console.log(e)}try{if(p){let s={name:e.name,version:"1",chainId:null==o?void 0:o.id,verifyingContract:r},c={owner:t,spender:a,value:n,nonce:i,deadline:BigInt(d)};console.log("value",c);let u=await (null==l?void 0:l.signTypedData({types:{Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},domain:s,primaryType:"Permit",message:c}));console.log("xsig",u);let p=b.P.from(u);return console.log("sig",p),{permit:!0,allowanceTime:0,deadline:d,v:Number(p.v),r:p.r.toString(),s:p.s.toString()}}{let e=await u.allowance(t,a);if(console.log("allowance",e,n),e>=n)return{permit:!1,allowanceTime:d,deadline:0,v:0,r:(0,v.r)(""),s:(0,v.r)("")};let s=await (null==l?void 0:l.sendTransaction({to:r,data:u.interface.encodeFunctionData("approve",[a,n]),chain:o}));if(console.log(s),!s)throw Error("Transaction failed");let i=!0;for(;i;)try{await new Promise(e=>setTimeout(e,1e4));let e=await (null==c?void 0:c.getTransactionReceipt({hash:s}));if(console.log(e),!e)throw Error("Transaction failed");i=!1}catch(e){console.log(e),i=!!(e.message.includes("could not be found")||e.message.includes("Insufficient RU balance"))}console.log("tx DONE"),await new Promise(e=>setTimeout(e,5e3));let p=await u.allowance(t,a);if(console.log("newAllowance",p),p<n&&(await new Promise(e=>setTimeout(e,15e3)),p=await u.allowance(t,a),console.log("newAllowance",p),p<n))throw Error("Approval failed");return{permit:!1,allowanceTime:d,deadline:0,v:0,r:"",s:""}}}catch(e){throw console.log(e),e}}var S=t(45652),j=t.n(S),B=t(12229),E=t(39613),P=t(2790);let A=B.m9(6401),N=B.m9(6401),I=0;var components_ContractPays=e=>{let{takerAddress:n,sellToken:t,exchangeProxy:s,amount:o,minAmountOut:i}=e,{chain:r}=(0,d.LN)(),[l,c]=(0,u.useState)((0,a.jsx)(a.Fragment,{})),{provider:p}=(0,f.x)(),[m,y]=(0,u.useState)(!1),g=t.contractAddress,[h,w]=(0,u.useState)({permit:!1,allowanceTime:0,deadline:0,v:0,r:(0,v.r)(""),s:(0,v.r)("")}),[x,T]=(0,u.useState)(!1),{data:b,signMessage:_}=(0,d.QW)(),S=0,fetchDataWithRetry=async()=>{try{let e=await (null==p?void 0:p.getFeeData());if(!e)throw Error("No fee data");return e}catch(e){if(console.error("Error fetching fee data:",e.message),S<5)return S++,console.log("Retrying (".concat(S,"/").concat(5,")...")),await new Promise(e=>setTimeout(e,2500)),await fetchDataWithRetry();throw console.error("Max retries reached. Unable to fetch fee data."),e}},handleApproveAndSign=async()=>{try{if(!(I=await fetch("".concat(F,"/get-nonce"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:n})}).then(e=>e.json()).then(e=>(console.log("get-nonce response:",e),e.nonce||0)).catch(e=>(console.error("get-nonce error:",e),0)))||0===I){console.error("No nonce found"),c((0,a.jsx)(a.Fragment,{children:"Cannot access relay server. Please try again later, or check X/Telegram for server status "}));return}let e=await (0,k.xz)();if(!e)return console.error("No wallet client found");if(!p){console.error("provider is undefined");return}console.log("provider:",p);let l=E.R.defaultAbiCoder(),u=new P.vU(["function transferFrom(address,address,uint256)"]);N=u.encodeFunctionData("transferFrom",[n,s,BigInt(o)]),console.log("messageHash:",N);let d=await fetchDataWithRetry(),m=d.gasPrice||d.maxFeePerGas||BigInt("40");console.log("gasPrice:",m);let h=BigInt(m)*BigInt(275e3);if(console.log("gasGwei:",h),console.log("minAmountOut:",i),h>BigInt(i)){console.error("Gas cost is greater than amount"),c((0,a.jsx)(a.Fragment,{children:"Gas cost is greater than amount returned."})),y(!1);return}console.log("gasLimit:",275e3),y(!0),A=l.encode(["address","address","address","uint256","uint256","uint256","uint256","uint256","uint256"],[n,s.toUpperCase().replace("0X","0x"),g.toUpperCase().replace("0X","0x"),BigInt(o),BigInt(i),BigInt(I),BigInt(0),m,BigInt(275e3)]),console.log("message:",A,g.toUpperCase().replace("0X","0x"),o,i,I,m,275e3),console.log("signing data",N);try{let e=await getTokenTransferPermission(t,BigInt(o),n,s,p,r);console.log("signMessage result:",e),e&&(console.log(e),T(!0),w(e),_({message:A}))}catch(e){throw console.error("signMessage error:",e),c((0,a.jsx)(a.Fragment,{children:"Something went wrong.. Please try again later, or check X/Telegram for server status."})),y(!1),e}}catch(e){console.error("handleApproveAndSign error:",e),c((0,a.jsx)(a.Fragment,{children:"Something went wrong.. Please try again later, or check X/Telegram for server status."})),y(!1)}};return(0,u.useEffect)(()=>{if(!b)return;let e=(null==r?void 0:r.id)===1?"/swapforeth":"/swapforsepolia";console.log("message:",A),console.log("signMessageData:",b),fetch(F+e,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:s,signedData:A,signMessageData:b,messageHash:N,gasPrice:101,nonce:I,permitResult:h})}).then(e=>{console.log(e),e.json().then(e=>{console.log("swapforeth response:",e),e.transactionHash?c((0,a.jsxs)(a.Fragment,{children:["Transaction sent. ",(0,a.jsx)("a",{href:'https://etherscan.io/tx/"         {data.transactionHash}         "',target:"_blank",children:"View on Etherscan"})]})):c((0,a.jsx)(a.Fragment,{children:"Something went wrong. Please try again later, or check X/Telegram for server status."}))}),y(!1)}).catch(e=>{console.error(e),y(!1),c((0,a.jsx)(a.Fragment,{children:"Something went wrong. If you are swapping small amounts it may be there is not enough to pay for the transaction."}))})},[r,s,b]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:handleApproveAndSign,disabled:m,children:m?"Checking, please wait...":"Swap to ETH: We Pay Gas *"}),(0,a.jsxs)("div",{className:j().contractPaysInfo,children:["* May require minimal gas for approval, depending on token contract.",(0,a.jsx)("br",{}),"Soon: ",(0,a.jsx)("a",{href:"https://token.bitx.cx",target:"_blank",children:"Registered $BitX stakers can get this loaned"}),(0,a.jsx)("br",{}),"Gas/Tx Fee taken from result."]}),(0,a.jsx)("div",{className:j().contractPaysInfoTxt,children:l})]})},components_UserPays=e=>{let{takerAddress:n,sellToken:t,exchangeProxy:s,amount:o,minAmountOut:i}=e,[r,l]=(0,u.useState)(""),[c,p]=(0,u.useState)("Swap to ETH: You Pay Gas"),[m,y]=(0,u.useState)(""),{provider:g}=(0,f.x)(),[w,T]=(0,u.useState)(!1),[k,b]=(0,u.useState)(!1),{chain:_}=(0,d.LN)(),S=(0,d.xx)(),[j,B]=(0,u.useState)({permit:!1,allowanceTime:0,deadline:0,v:0,r:(0,v.r)(""),s:(0,v.r)("")}),E=t.contractAddress,{config:P}=(0,d.PJ)({address:s,chainId:S,abi:x,functionName:"swapTokensForETH_UserPaysGas_withPermit",args:[E,BigInt(o),i,BigInt(j.deadline),parseInt(j.v.toString()),j.r,j.s],enabled:k}),{data:A,write:N}=(0,d.GG)(P),{isLoading:I,isSuccess:F}=(0,d.BX)({hash:null==A?void 0:A.hash}),handleUserPays=async()=>{l(""),p("Sending transaction...");try{let e=await getTokenTransferPermission(t,BigInt(o),n,s,g,_);console.log("signMessage result:",e),b(!0),B(e)}catch(e){console.error("signMessage error:",e),y("Something went wrong.. Please try again later, or check X/Telegram for server status."),T(!1)}p("Transaction sent!")};return(0,u.useEffect)(()=>{if(!0===j.permit||j.allowanceTime>0){p("Sending TX");try{null==N||N()}catch(e){console.error("write error:",e),p("Swap to ETH: You Pay Gas"),l("Something went wrong.. Please try again later, or check X/Telegram for server status.")}}},[j,N]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{disabled:I,className:h().quoteButton,onClick:async()=>{handleUserPays()},children:c||"Swap to ETH: You Pay Gas"}),I&&(0,a.jsx)("div",{children:"Waiting for confirmation..."}),(0,a.jsxs)("div",{children:[r,m]}),F&&(0,a.jsxs)("div",{children:["Successfully Swapped!",(0,a.jsx)("div",{children:(0,a.jsx)("a",{href:"https://etherscan.io/tx/".concat(null==A?void 0:A.hash),target:"_blank",children:"View TX"})})]})]})};let F="https://router.bitx.cx";var components_TokenRow=e=>{var n;let{token:t,tokenBalance:s,displayBalance:o,userGasBalance:i}=e,r=(null===(n=(0,d.LN)().chain)||void 0===n?void 0:n.id)===1?"0x6627c8701ce1d8fba884cd6d27c14afaec13fa5a":"0x623944a16f3a8d083a4f88acab4faa3a9040b24e",[l,c]=(0,u.useState)(BigInt(0)),[p,m]=(0,u.useState)(null),[y,g]=(0,u.useState)(BigInt(0)),{state:w,dispatch:x}=useTokenContext(),[k,b]=(0,u.useState)(""),v=useAddress(),{provider:_}=(0,f.x)(),[S]=(0,u.useState)("");console.log("TokenRow token:",t),console.log("TokenRow walletAddress:",v),console.log("displayBalance:",o),(0,u.useEffect)(()=>{s&&c(s)},[s]),console.log("TokenRow tokenBalance:",s);let handleGetQuote=async()=>{if(!_)return console.error("No provider found");try{b(""),g(BigInt(0));let e=await getSwapQuote(_,t.contractAddress,BigInt(l),w.defaultSlippage,BigInt(0),r);console.log("Quote:",e),m(e)}catch(e){console.error("Error getting quote:",e),b("Error getting quote, please try again shortly")}},j=BigInt(p?BigInt(p[1]):BigInt(0)),B=p?BigInt(p[0]):BigInt(0),E=BigInt(B)-BigInt(j),P=E*(BigInt(1e4)+BigInt(w.defaultSlippage))/BigInt(1e4);y===BigInt(0)&&p&&g(E),(0,u.useEffect)(()=>{m(null)},[l]);let A=!!p&&p[2],N=BigInt(j),I=BigInt(Number(i));return console.log("TokenRow canSwap:",A),console.log("TokenRow egc:",N),console.log("TokenRow ugb:",I),(0,a.jsxs)("div",{className:h().tokenActions,children:[s>0&&"0x"===t.contractAddress.substring(0,2)&&(0,a.jsxs)("div",{className:h().sliderContainer,children:[(0,a.jsx)("input",{type:"range",min:"0",max:s.toString(),step:(parseInt(s.toString())/1e3).toString(),value:l.toString(),onChange:e=>c(BigInt(+e.target.value)),className:h().rangeInput}),(0,a.jsx)("span",{className:h().rangeValue,children:(p||l!=s)&&(0,a.jsxs)(a.Fragment,{children:["Convert: ",T.dF(l).toString()," ",t.symbol]})})]}),!p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:handleGetQuote,disabled:l===BigInt(0),className:h().actionButton,children:"Get Quote"}),(0,a.jsx)("div",{id:"quoteinfo",children:S})]}),k&&(0,a.jsx)("div",{className:"error-message",children:k}),p&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"range",min:"0",max:P.toString(),value:y.toString(),onChange:e=>g(BigInt(e.target.value)),className:h().rangeInput}),(0,a.jsxs)("span",{className:h().rangeValue,children:["ETH Minimum returned: ",T.dF(y)," "]}),I>=N&&(0,a.jsx)(components_UserPays,{takerAddress:v||"0x000",sellToken:t,exchangeProxy:r,amount:l.toString(),minAmountOut:y}),I<N&&(0,a.jsx)("div",{className:h().actionButton,children:"You do not have enough ETH for gas"}),A&&(0,a.jsx)(components_ContractPays,{takerAddress:v||"0x000",sellToken:t,exchangeProxy:r,amount:l.toString(),minAmountOut:y}),!A&&(0,a.jsx)("div",{className:h().actionButton,children:"Gas is too high to swap this amount"})]})]})},R=u.memo(e=>{let{token:n,balance:t,userGasBalance:s}=e,[o,i]=(0,u.useState)(""),r=parseFloat(t||"0"),l=T.dF(t||"0"),c=BigInt(t||"0");return r>0&&"0x"===n.contractAddress.substring(0,2)&&(0,a.jsxs)("li",{className:h().TokenRow,children:[(0,a.jsxs)("div",{className:h().tokenDetails,children:[(0,a.jsxs)("div",{className:h().tokenNameSymbol,children:[(0,a.jsx)("div",{className:h().tokenName,children:n.name}),(0,a.jsx)("div",{className:h().tokenSymbol,children:(0,a.jsx)("a",{href:"https://etherscan.io/token/"+n.contractAddress,target:"_blank",children:n.symbol})})]}),(0,a.jsx)("div",{className:h().tokenBalance,children:l||"Loading..."})]}),(0,a.jsx)(components_TokenRow,{token:n,tokenBalance:c,displayBalance:l,userGasBalance:s}),o&&(0,a.jsx)("div",{className:"error-message",children:o})]})});async function FetchTokenBalance(e,n,t){try{let a=new w.CH(e,["function balanceOf(address owner) view returns (uint256)"],t),s=await a.balanceOf(n);return s}catch(e){throw console.error("Error fetching token balance:",e),e}}var components_TokenList=()=>{let[e,n]=(0,u.useState)({}),[t,s]=(0,u.useState)(!0),[o,i]=(0,u.useState)(BigInt(0)),r=useAddress(),{state:l}=useTokenContext(),{provider:c}=(0,f.x)(),p=l.tokens;return(0,u.useEffect)(()=>{let e=!0,fetchBalancesSequentially=async()=>{let t={};if(Array.isArray(p)&&p.length>0&&r&&c){for(let e of p)try{let a=e.balance||await FetchTokenBalance(e.contractAddress,r,c);t[e.id]=a,n(e=>({...e,...t})),console.log("TokenList balance:",a)}catch(n){console.error("Error fetching balance for token",e.id,n)}e&&(console.log("TokenList newBalances:",t),n(e=>({...e,...t})),s(!1))}};return fetchBalancesSequentially(),()=>{e=!1}},[p,r,c]),(0,u.useEffect)(()=>{r&&(null==c||c.getBalance(r).then(e=>{i(BigInt(e))}))},[r]),(0,a.jsx)("ul",{className:h().tokenRowContainer,children:t?(0,a.jsxs)("div",{children:["Loading... This may take a while if you have many tokens.",(0,a.jsx)("br",{}),"Make sure you have connected your wallet."," "]}):p.map(n=>(0,a.jsx)(R,{token:n,balance:e[n.id],userGasBalance:o},n.id))})},components_SlippageSetting=()=>{let{state:e,dispatch:n}=useTokenContext();return e.defaultSlippage&&(0,a.jsxs)("div",{className:h().defaultSlippage,children:[" Default Slippage:",(0,a.jsx)("input",{type:"range",min:"1",max:"1000",step:"10",value:e.defaultSlippage,onChange:e=>{n({type:"SET_DEFAULT_SLIPPAGE",payload:parseFloat(e.target.value)})}}),(0,a.jsxs)("span",{children:[(e.defaultSlippage/100).toString(),"%"]})]})};function Home(){let[e,n]=(0,u.useState)(!1),[t,s]=(0,u.useState)(!1),closeAll=()=>{n(!1),s(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o(),{children:[(0,a.jsx)("title",{children:"BitXchange"}),(0,a.jsx)("meta",{name:"description",content:"Swap your tokens to ETH even when you have no gas"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"57x57",href:"/favicon/apple-icon-57x57.png"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"60x60",href:"/favicon/apple-icon-60x60.png"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"72x72",href:"/favicon/apple-icon-72x72.png"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"76x76",href:"/favicon/apple-icon-76x76.png"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"114x114",href:"/favicon/apple-icon-114x114.png"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"120x120",href:"/favicon/apple-icon-120x120.png"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"144x144",href:"/favicon/apple-icon-144x144.png"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"152x152",href:"/favicon/apple-icon-152x152.png"}),(0,a.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"/favicon/apple-icon-180x180.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"192x192",href:"/favicon/android-icon-192x192.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"/favicon/favicon-32x32.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"96x96",href:"/favicon/favicon-96x96.png"}),(0,a.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"/favicon/favicon-16x16.png"}),(0,a.jsx)("meta",{name:"msapplication-TileColor",content:"#ffffff"}),(0,a.jsx)("meta",{name:"msapplication-TileImage",content:"/favicon/ms-icon-144x144.png"}),(0,a.jsx)("meta",{name:"theme-color",content:"#ffffff"}),(0,a.jsx)("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"})]}),(0,a.jsxs)("header",{children:[(0,a.jsx)("div",{className:c().backdrop,style:{opacity:t||e?1:0}}),(0,a.jsxs)("div",{className:c().header,children:[(0,a.jsx)("div",{className:c().logo,children:(0,a.jsx)(r(),{src:"/favicon/favicon-96x96.png",alt:"Bitx.cx Logo",height:"32",width:"32"})}),(0,a.jsxs)("div",{className:c().buttons,children:[(0,a.jsx)("div",{onClick:closeAll,className:"".concat(c().highlight," ").concat(e?c().highlightSelected:""),children:(0,a.jsx)("w3m-network-button",{})}),(0,a.jsx)("div",{onClick:closeAll,className:"".concat(c().highlight," ").concat(t?c().highlightSelected:""),children:(0,a.jsx)("w3m-button",{})})]})]})]}),(0,a.jsx)("main",{className:c().main,children:(0,a.jsx)("div",{className:c().wrapper,children:(0,a.jsxs)("div",{className:c().container,children:[(0,a.jsx)("h1",{className:c().title,children:"Swap your tokens for ETH..."}),(0,a.jsx)("h2",{className:c().subtitle,children:"...even when you have no gas."}),(0,a.jsxs)(TokenProvider,{children:[(0,a.jsx)(components_SlippageSetting,{}),(0,a.jsx)(components_TokenList,{})]}),(0,a.jsxs)("div",{className:c().footer,children:[(0,a.jsxs)("a",{href:"https://bitx.cx",children:[(0,a.jsx)("img",{src:"/favicon/favicon-96x96.png",alt:"BitxChange Logo",height:"32",width:"32"})," ","Bitx.cx"]})," ","|",(0,a.jsxs)("a",{href:"https://token.bitx.cx",children:[(0,a.jsx)("img",{src:"/favicon/favicon-96x96.png",alt:"BitxChange Logo",height:"32",width:"32"})," ","Token"]})]})]})})})]})}},45652:function(e){e.exports={contractPaysInfoTxt:"ContractPays_contractPaysInfoTxt__oLfEj",contractPaysInfo:"ContractPays_contractPaysInfo__qWhQk"}},72242:function(e){e.exports={main:"Home_main__2uIek",wrapper:"Home_wrapper__02JqL",animateGlow:"Home_animateGlow__8dMnF",content:"Home_content__Qnbja",footer:"Home_footer__wJNRn",container:"Home_container__9OuOz",button:"Home_button__Mzpzz",highlight:"Home_highlight__TZ0SE",highlightSelected:"Home_highlightSelected__sCqsL",header:"Home_header__ZUWxe",buttons:"Home_buttons__L_amR",backdrop:"Home_backdrop__HYxNf"}},2164:function(e){e.exports={defaultSlippage:"TokenRow_defaultSlippage__cM2kR",tokenRowContainer:"TokenRow_tokenRowContainer__hDtli",TokenRow:"TokenRow_TokenRow___Uekq",tokenDetails:"TokenRow_tokenDetails__e5dRe",tokenName:"TokenRow_tokenName__MK0t5",tokenSymbol:"TokenRow_tokenSymbol__hGMj0",tokenBalance:"TokenRow_tokenBalance__Ar01J",tokenNameSymbol:"TokenRow_tokenNameSymbol__13r3_",tokenActions:"TokenRow_tokenActions__J_pz2",actionButton:"TokenRow_actionButton__K3_xh"}}},function(e){e.O(0,[955,774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);